func:
    push %rbp                  # сохранить старый rbp
    movq %rsp, %rbp            # rbp = rsp
    subq $32, %rsp             # выделить 32 байта для локальных переменных

    # теперь:
    # rbp-8, rbp-16, ... -- локальные переменные
    # rbp+8 -- адрес возврата
    # rbp+16, rbp+24 -- аргументы (если они на стеке)

    # ....

    movq $0, %rax              # подготовить возвращаемое значение

    leave                      # эквивалент: movq %rbp, %rsp; pop %rbp
    # (или явно: movq %rbp, %rsp; popq %rbp)

    ret                        # pop адрес возврата и jmp