##### Что такое линковка?

**Линковка** -- стадия, на которой линковщик:

- объединяет несколько объектных файлов и библиотек;
- по таблицам символов находит **определения** для всех использованных, но не определённых функций и переменных;
- расставляет окончательные адреса (делает релокации);
- формирует итоговый ELF‑файл с корректной точкой входа.

##### Что такое библиотеки (либы)?

- **Статическая библиотека** -- архив объектных файлов (`.a`), код из неё **копируется** в итоговый бинарь при линковке.
- **Динамическая библиотека** -- разделяемый объект (`.so`), код **не копируется** в бинарь, а подгружается при запуске
  динамическим линковщиком.

В обоих случаях библиотека -- это ELF‑файл(ы), содержащие символы с определениями.

##### Покажите на примере простейшей программы, как вручную с помощью ld слинковать объектный файл со стандартной либой C++.

Пусть есть файл `main.cpp`:

```cpp
#include <iostream>

int main() {
    std::cout << "Hello caos!!!" << std::endl;
}
```

Сначала получаем объектный файл:

```bash
g++ -c main.cpp -o main.o
```

Теперь вызываем `ld` напрямую. Нужно явно указать:

- объект программы `main.o`;
- стартовые объекты `crtbegin.o`, `crtend.o`;
- стандартные библиотеки `libstdc++`, `libc`;

Пример (пути зависят от дистрибутива и версии ващего компилятора):

```bash
ld main.o \
  /usr/lib/libstdc++.so \
  /usr/lib/libc.so \
  /usr/lib/gcc/x86_64-pc-linux-gnu/13.3.1/crtbegin.o \
  /usr/lib/gcc/x86_64-pc-linux-gnu/13.3.1/crtend.o \
  -o main
```

Он не запустится
``
./main: cannot execute: required file not found
``
Потому что в секции `.interp` не будет корректного пути к динамическому загрузчику

##### Как добиться, чтобы полученный исполняемый файл удалось запустить?

- Указать **правильный динамический линковщик** (`-dynamic-linker`).
- Подключить все **crt\*.so** (C runtime), которые определяют секции `.init/.fini`, метку `_start` и вызывают `main`
  через `__libc_start_main`.

```bash
ld main.o \
  /usr/lib/libstdc++.so \
  /usr/lib/libc.so \
  /usr/lib/gcc/x86_64-pc-linux-gnu/15.1.1/crtbegin.o \
  /usr/lib/gcc/x86_64-pc-linux-gnu/15.1.1/crtend.o \
  /usr/lib/crti.o \
  /usr/lib/crtn.o \
  /usr/lib/crt1.o \
  -dynamic-linker /lib64/ld-linux-x86-64.so.2 \
  -o main
```

За что какие объектники отвечают можно прочитать вот здесь
https://stackoverflow.com/questions/22160888/what-is-the-difference-between-crtbegin-o-crtbegint-o-and-crtbegins-o
